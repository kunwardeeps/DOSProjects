<html>
	<head>
	</head>

	<body>
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2">
					<h1 align ="center">Welcome to BitCoin Simulator</h1>
				</div>
			</div>
		</div>
		<form id="transact-form">
			<div class="form-group">
				<div class="col-md-4 col-xs-8">
					<label for="senderPublicKeys">Select Sender Public Key</label>
					<select class="form-control" id="senderPublicKeys" value='a'></select>
					
				</div>
				<div class="col-md-4 col-xs-8">
					<label for="receiverPublicKeys">Select Receiver Public Key</label>
					<select class="form-control" id="receiverPublicKeys" value='a'></select>
				</div>
			</div>
			<div class="form-group col-md-12 col-xs-12">
			</div>
			<div class="form-group col-md-4 col-xs-8">
				<label for="enterAmount">Wallet Balance</label>
				<input class="form-control" type="text" id="walletBalance" placeholder="Wallet Balance" readonly> 					
			</div>
			<div class="form-group col-md-12 col-xs-12">
			</div>
			<div class="form-group col-md-4 col-xs-8">
				<label for="enterAmount">Enter Transaction Amount</label>
				<input type="text" class="form-control" id="enterAmount" placeholder="50" value="50">
			</div>
			<div class="form-group col-md-12 col-xs-12">
				<button type="button" id="publish-btn">Sign & Confirm</button>
			</div>
			<div class="form-group col-md-4 col-xs-8">
				<input class="form-control" type="text" id="signature" placeholder="Signature" readonly> 					
			</div>
			<div class="form-group col-md-4 col-xs-8">
				<input class="form-control" type="text" id="transactionID" placeholder="Transaction ID" readonly> 					
			</div>
			<div class="form-group col-md-4 col-xs-8">
				<input class="form-control" type="text" id="status" placeholder="Status" readonly> 					
			</div>
		</form>
		<script>

			$(document).ready(function(){
				$.ajax({
					type: 'get',
					url: 'http://localhost:4000/dropDown/',
					success: function(data){
						helpers.buildDropdown(
						data,
						$('#senderPublicKeys'),
						'Select an option'
					);
					helpers.buildDropdown(
						data,
						$('#receiverPublicKeys'),
						'Select an option'
					);}

				});
			});

			var helpers={

					buildDropdown: function(result, dropdown, emptyMessage)
					{
						dropdown.html('');
						dropdown.append('<option value="">' + emptyMessage + '</option>');
						if(result != ''){
							$.each(result, function(k, v) {
								dropdown.append('<option value="' + v + '">' + v + '</option>');
							});
						}
					}
				}

			$("#sign-btn").click(function(){
				var pubKey = document.getElementById("publishKeysSelect").value.length > 0 ?  document.getElementById("publishKeysSelect").value : 'a';
				var txnAmt = document.getElementById("enterAmount").value;
				$("#status").val("Pending");
				console.log("pubKey: ", pubKey, txnAmt)

				$.ajax({
				url: 'http://localhost:4000/sign',
				contentType: 'application/json; charset=utf-8',
				dataType: 'json',				
				data: '{"pubKey":"' + pubKey + '","txnAmt":"' + txnAmt + '"}',
				//data: JSON.stringify({pubKey: pubKey , txnAmt: txnAmt}),
				type: 'get',
					success: function(response){
						console.log(response);
					}
				});
				
			});

			$("#publish-btn").click(function(){
				alert("Published");
			});
		</script>

	</body>
</html>